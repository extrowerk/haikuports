From 4f5e6dd0cb8b86e480e5b93a003003c4d3327cd7 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Zolt=C3=A1n=20Mizsei?= <zmizsei@extrowerk.com>
Date: Tue, 26 Dec 2017 11:27:11 +0100
Subject: [PATCH] Haiku supporting patches

---
 configure.ac                                        | 4 ++++
 include/jemalloc/internal/jemalloc_internal_decls.h | 2 +-
 2 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/configure.ac b/configure.ac
index 1551ded..22f8fbb 100644
--- a/configure.ac
+++ b/configure.ac
@@ -549,6 +549,10 @@ case "${host}" in
 	abi="elf"
 	force_tls="0"
 	;;
+  *-*-haiku*)
+	abi="elf"
+	force_tls="0"
+	;;
   *-*-bitrig*)
 	abi="elf"
 	;;
diff --git a/include/jemalloc/internal/jemalloc_internal_decls.h b/include/jemalloc/internal/jemalloc_internal_decls.h
index 8ae5ef4..57824bb 100644
--- a/include/jemalloc/internal/jemalloc_internal_decls.h
+++ b/include/jemalloc/internal/jemalloc_internal_decls.h
@@ -9,7 +9,7 @@
 #else
 #  include <sys/param.h>
 #  include <sys/mman.h>
-#  if !defined(__pnacl__) && !defined(__native_client__)
+#  if !defined(__pnacl__) && !defined(__native_client__) && !defined(__HAIKU__)
 #    include <sys/syscall.h>
 #    if !defined(SYS_write) && defined(__NR_write)
 #      define SYS_write __NR_write
-- 
2.15.1

