From 65d0fae2dc1ddae7ddfd9777fb7be1eb3631067d Mon Sep 17 00:00:00 2001
From: Adrien Destugues <pulkomandy@gmail.com>
Date: Sun, 19 Apr 2015 13:38:07 +0200
Subject: buildsystem configuration for Haiku

---
 source/acinclude.m4 | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/source/acinclude.m4 b/source/acinclude.m4
index 507f41f..344c7bc 100644
--- a/source/acinclude.m4
+++ b/source/acinclude.m4
@@ -463,6 +463,9 @@ AC_DEFUN([AC_CHECK_STRICT_COMPILE],
         if test "$GCC" = yes
         then
             case "${host}" in
+            *-*-haiku*)
+                CFLAGS="$CFLAGS -std=c9x"
+                ;;
             *-*-solaris*)
                 # Don't use -std=c11 on Solaris because of timezone check fails
                 ;;
-- 
2.16.4


From ab4897a6025b583c4656361f2a406b5eb73f5b80 Mon Sep 17 00:00:00 2001
From: Adrien Destugues <pulkomandy@gmail.com>
Date: Fri, 3 Oct 2014 11:07:01 +0200
Subject: Don't call tzset and tzname on Haiku

While they exist, they are implemented using ICU, and trying to use them
within ICU results in a deadlock.

---
 source/common/putilimp.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/source/common/putilimp.h b/source/common/putilimp.h
index 8b858df..fd59113 100644
--- a/source/common/putilimp.h
+++ b/source/common/putilimp.h
@@ -101,7 +101,7 @@ typedef size_t uintptr_t;
 #if U_PLATFORM_HAS_WINUWP_API == 0
 #   define U_TZSET _tzset
 #endif
-#elif U_PLATFORM == U_PF_OS400
+#elif U_PLATFORM == U_PF_OS400 || defined(__HAIKU__)
    /* not defined */
 #else
 #   define U_TZSET tzset
@@ -139,7 +139,7 @@ typedef size_t uintptr_t;
 #if U_PLATFORM_HAS_WINUWP_API == 0
 #   define U_TZNAME _tzname
 #endif
-#elif U_PLATFORM == U_PF_OS400
+#elif U_PLATFORM == U_PF_OS400 || defined(__HAIKU__)
    /* not defined */
 #else
 #   define U_TZNAME tzname
-- 
2.16.4
