SUMMARY="Open Cubic Player"
DESCRIPTION="ocp - Open Cubic Player, a music player ported from DOS."
HOMEPAGE="http://stian.cubic.org/project-ocp.php"
COPYRIGHT="1994-2012 Niklas Beisert, Stian Skjelstad and others"
LICENSE="GNU GPL v2"
REVISION="1"
SOURCE_URI="git://git.code.sf.net/p/opencubicplayer/code#835bf803f590512848282bbf74986ebfaec17da3"
CHECKSUM_SHA256="000000000000000000000000000000000"
SOURCE_DIR="code"
PATCHES="ocp-0.1.21_git.patchset"

ARCHITECTURES="!x86_gcc2 x86 ?x86_64"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	ocp$secondaryArchSuffix = $portVersion
	cmd:ocp = $portVersion
	cmd:ocp_0.1.21 = $portVersion
	cmd:ocp_curses = $portVersion
	cmd:ocp_sdl = $portVersion
	cmd:ultrafix.sh = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	lib:libSDL_1.2$secondaryArchSuffix >= 0.11.4
	lib:libiconv$secondaryArchSuffix
	lib:libncurses$secondaryArchSuffix
	lib:libz$secondaryArchSuffix
	lib:libogg$secondaryArchSuffix >= 0.8.0
	lib:libvorbis$secondaryArchSuffix >= 0.4.5
	lib:libFLAC$secondaryArchSuffix
	lib:libmad$secondaryArchSuffix >= 0.2.1
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	devel:libSDL_1.2$secondaryArchSuffix >= 0.11.4
	devel:libiconv$secondaryArchSuffix
	devel:libncurses$secondaryArchSuffix
	devel:libz$secondaryArchSuffix >= 1.2.8
	devel:libogg$secondaryArchSuffix >= 0.8.0
	devel:libvorbis$secondaryArchSuffix >= 0.4.5
	devel:libFLAC$secondaryArchSuffix
	devel:libmad$secondaryArchSuffix >= 0.2.1
	"
BUILD_PREREQUIRES="
	cmd:autoconf
	cmd:gettext$secondaryArchSuffix
	cmd:gcc$secondaryArchSuffix
	cmd:make
	cmd:makeinfo
	cmd:pkg_config$secondaryArchSuffix
	cmd:sdl_config$secondaryArchSuffix
	"

BUILD()
{
	autoconf
	runConfigure ./configure
	make
}

INSTALL()
{
	make install
}
