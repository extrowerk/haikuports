SUMMARY="RPCSVC protocol definitions from glibc"
DESCRIPTION="This package contains rpcsvc proto.x files from glibc, which \
are missing in libtirpc. Additional it contains rpcgen, which is needed to \
create header files and sources from protocol files.
This package is only needed, if glibc is installed without the deprecated \
sunrpc functionality and libtirpc should replace it."
HOMEPAGE="https://github.com/thkukuk"
COPYRIGHT="2010, Oracle America, Inc."
LICENSE="GNU LGPL v2.1
	BSD (3-clause)"
REVISION="1"
SOURCE_URI="https://github.com/thkukuk/rpcsvc-proto/releases/download/v$portVersion/rpcsvc-proto-$portVersion.tar.xz"
CHECKSUM_SHA256="678851b9f7ddf4410d2859c12016b65a6dd1a0728d478f18aeb54d165352f17c"
SOURCE_DIR="rpcsvc-proto-$portVersion"
PATCHES="rpcsvc_proto-$portVersion.patchset"

ARCHITECTURES="x86_gcc2 x86 x86_64"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	rpcsvc_proto$secondaryArchSuffix = $portVersion
	cmd:rpcgen$secondaryArchSuffix = $portVersion
	devel:librpcsvc_proto$secondaryArchSuffix = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	lib:libgettextpo$secondaryArchSuffix
	lib:libintl$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	devel:libgettextlib$secondaryArchSuffix
	devel:libintl$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	cmd:awk
	cmd:gcc$secondaryArchSuffix
	cmd:grep
	cmd:make
	"

BUILD()
{
	LDFLAGS="-lintl -lgettextlib" runConfigure ./configure
	make $jobArgs
}

INSTALL()
{
	make install
}

TEST()
{
	make check
}
