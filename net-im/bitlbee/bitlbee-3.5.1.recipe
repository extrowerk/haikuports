SUMMARY="IRC to IM gateway that support multiple IM protocols"
DESCRIPTION="BitlBee brings IM (instant messaging) to IRC clients. It's a \
great solution for people who have an IRC client running all the time and \
don't want to run an additional MSN/AIM/whatever client.
BitlBee currently supports the following IM networks/protocols: XMPP/Jabber \
(including Google Talk and Hipchat), MSN/Skype, Yahoo! Messenger, AIM and \
ICQ, the Twitter microblogging network (plus all other Twitter API \
compatible services like status.net)"
HOMEPAGE="https://www.bitlbee.org/"
COPYRIGHT="2002-2013 Wilmer van der Gaast and others"
LICENSE="GNU GPL v2"
REVISION="1"
SOURCE_URI="https://github.com/bitlbee/bitlbee/archive/$portVersion.tar.gz"
CHECKSUM_SHA256="741c139ed65c92227401bed344a03c8674536426cd4fdfc12e6406b8622a7c29"
PATCHES="bitlbee-$portVersion.patchset"

ARCHITECTURES="!x86_gcc2 x86 x86 x86_64"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	bitlbee${secondaryArchSuffix} = $portVersion
	cmd:bitlbee${secondaryArchSuffix} = $portVersion

	"
REQUIRES="
	haiku$secondaryArchSuffix
	lib:libgcrypt$secondaryArchSuffix
	lib:libglib_2.0$secondaryArchSuffix
	lib:libgmodule_2.0$secondaryArchSuffix
	lib:libgnutls$secondaryArchSuffix
	lib:libgpg_error$secondaryArchSuffix
	lib:libintl$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	devel:libgcrypt$secondaryArchSuffix
	devel:libglib_2.0$secondaryArchSuffix
	devel:libgmodule_2.0$secondaryArchSuffix
	devel:libgnutls$secondaryArchSuffix
	devel:libgpg_error$secondaryArchSuffix
	devel:libintl$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	cmd:gcc$secondaryArchSuffix
	cmd:make
	cmd:pkg_config$secondaryArchSuffix
	cmd:python2
	"

BUILD()
{
	CFLAGS="-D_BSD_SOURCE -DB_USE_POSITIVE_POSIX_ERRORS" \
		LDFLAGS="-lnetwork -lposix_error_mapper" runConfigure ./configure
	make $jobArgs
}

INSTALL()
{
	make install

}

TEST()
{
	make check
}
